--// WindUI - ORIGINAL + Fishing Tab
local WindUI = loadstring(game:HttpGet(
    "https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"
))()

--// Create Window
local Window = WindUI:CreateWindow({
    Title = "NOOBHUB",
    Icon = "monitor",
    Author = "Bom Bom",

    OpenButton = {
        Title = "Open UI",
        Icon = "menu",
        CornerRadius = UDim.new(0,16),
        StrokeThickness = 2,
        Enabled = true,
        Draggable = true,
    }
})
--// Fishing Tab
local TabFishing = Window:Tab({
    Title = "Fishing",
    Icon = "fish"
})

TabFishing:Select()
task.wait() -- สำคัญมากสำหรับ WindUI บางเวอร์ชัน

TabFishing:Button({
    Title = "Hold Fishing Rod",
    Desc = "Equip fishing rod from hotbar",
    Callback = function()
        local args = {1}
        game:GetService("ReplicatedStorage")
            :WaitForChild("Packages")
            :WaitForChild("_Index")
            :WaitForChild("sleitnick_net@0.2.0")
            :WaitForChild("net")
            :WaitForChild("RE/EquipToolFromHotbar")
            :FireServer(unpack(args))
    end
})
local AutoFishing = false

TabFishing:Toggle({
    Title = "Auto Fishing",
    Desc = "Toggle auto fishing on/off",
    Value = false,
    Callback = function(v)
        AutoFishing = v

        local args = {
            AutoFishing
        }

        game:GetService("ReplicatedStorage")
            :WaitForChild("Packages")
            :WaitForChild("_Index")
            :WaitForChild("sleitnick_net@0.2.0")
            :WaitForChild("net")
            :WaitForChild("RF/UpdateAutoFishingState")
            :InvokeServer(unpack(args))
    end
})
TabFishing:Button({
    Title = "TP Buy Rods",
    Desc = "Teleport to Rod Shop",
    Callback = function()
        local player = game:GetService("Players").LocalPlayer
        local char = player.Character or player.CharacterAdded:Wait()
        local hrp = char:WaitForChild("HumanoidRootPart")

        hrp.CFrame = CFrame.new(145.23, 20.47, 2834.56)
    end
})
TabFishing:Button({
    Title = "Sell All Items",
    Desc = "Sell all items in inventory",
    Callback = function()
        game:GetService("ReplicatedStorage")
            :WaitForChild("Packages")
            :WaitForChild("_Index")
            :WaitForChild("sleitnick_net@0.2.0")
            :WaitForChild("net")
            :WaitForChild("RF/SellAllItems")
            :InvokeServer()
    end
})
--// Hack Tab
local TabHack = Window:Tab({
    Title = "Hack",
    Icon = "zap"
})

--// SIMPLE FLY (SAFE & STABLE)

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UIS = game:GetService("UserInputService")

local plr = Players.LocalPlayer

getgenv().Fly = false
local FLY_SPEED = 45

local conn
local bv, bg

local function getChar()
    local char = plr.Character or plr.CharacterAdded:Wait()
    return char, char:WaitForChild("Humanoid"), char:WaitForChild("HumanoidRootPart")
end

--========================
-- START FLY
--========================
getgenv().StartFly = function()
    if getgenv().Fly then return end
    getgenv().Fly = true

    local char, hum, hrp = getChar()
    local cam = workspace.CurrentCamera

    hum:ChangeState(Enum.HumanoidStateType.Physics)

    -- BodyVelocity
    bv = Instance.new("BodyVelocity")
    bv.MaxForce = Vector3.new(1e9, 1e9, 1e9)
    bv.Velocity = Vector3.zero
    bv.Parent = hrp

    -- BodyGyro
    bg = Instance.new("BodyGyro")
    bg.MaxTorque = Vector3.new(1e9, 1e9, 1e9)
    bg.P = 9e4
    bg.CFrame = cam.CFrame
    bg.Parent = hrp

    -- Loop
    conn = RunService.RenderStepped:Connect(function()
        if not getgenv().Fly then return end

        -- noclip
        for _,v in ipairs(char:GetDescendants()) do
            if v:IsA("BasePart") then
                v.CanCollide = false
            end
        end

        local moveDir = hum.MoveDirection
        local camCF = cam.CFrame

        local velocity =
            (camCF.RightVector * moveDir.X +
            camCF.LookVector * moveDir.Z) * FLY_SPEED

        bv.Velocity = Vector3.new(velocity.X, 0, velocity.Z)
        bg.CFrame = camCF
    end)
end

--========================
-- STOP FLY (ตกพื้นจริง)
--========================
getgenv().StopFly = function()
    if not getgenv().Fly then return end
    getgenv().Fly = false

    if conn then conn:Disconnect() conn = nil end

    local char, hum, hrp = getChar()

    if bv then bv:Destroy() bv = nil end
    if bg then bg:Destroy() bg = nil end

    -- force fall
    hrp.AssemblyLinearVelocity = Vector3.new(0, -100, 0)
    hum:ChangeState(Enum.HumanoidStateType.Freefall)

    -- restore collide
    for _,v in ipairs(char:GetDescendants()) do
        if v:IsA("BasePart") then
            v.CanCollide = true
        end
    end
end