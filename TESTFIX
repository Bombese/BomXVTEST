--// WindUI - ORIGINAL + Fishing Tab
local WindUI = loadstring(game:HttpGet(
    "https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"
))()

--// Create Window
local Window = WindUI:CreateWindow({
    Title = "NOOBHUB",
    Icon = "monitor",
    Author = "Bom Bom",

    OpenButton = {
        Title = "Open UI",
        Icon = "menu",
        CornerRadius = UDim.new(0,16),
        StrokeThickness = 2,
        Enabled = true,
        Draggable = true,
    }
})
--// Fishing Tab
local TabFishing = Window:Tab({
    Title = "Fishing",
    Icon = "fish"
})

TabFishing:Select()
task.wait() -- สำคัญมากสำหรับ WindUI บางเวอร์ชัน

TabFishing:Button({
    Title = "Hold Fishing Rod",
    Desc = "Equip fishing rod from hotbar",
    Callback = function()
        local args = {1}
        game:GetService("ReplicatedStorage")
            :WaitForChild("Packages")
            :WaitForChild("_Index")
            :WaitForChild("sleitnick_net@0.2.0")
            :WaitForChild("net")
            :WaitForChild("RE/EquipToolFromHotbar")
            :FireServer(unpack(args))
    end
})
local AutoFishing = false

TabFishing:Toggle({
    Title = "Auto Fishing",
    Desc = "Toggle auto fishing on/off",
    Value = false,
    Callback = function(v)
        AutoFishing = v

        local args = {
            AutoFishing
        }

        game:GetService("ReplicatedStorage")
            :WaitForChild("Packages")
            :WaitForChild("_Index")
            :WaitForChild("sleitnick_net@0.2.0")
            :WaitForChild("net")
            :WaitForChild("RF/UpdateAutoFishingState")
            :InvokeServer(unpack(args))
    end
})
TabFishing:Button({
    Title = "TP Buy Rods",
    Desc = "Teleport to Rod Shop",
    Callback = function()
        local player = game:GetService("Players").LocalPlayer
        local char = player.Character or player.CharacterAdded:Wait()
        local hrp = char:WaitForChild("HumanoidRootPart")

        hrp.CFrame = CFrame.new(145.23, 20.47, 2834.56)
    end
})
TabFishing:Button({
    Title = "Sell All Items",
    Desc = "Sell all items in inventory",
    Callback = function()
        game:GetService("ReplicatedStorage")
            :WaitForChild("Packages")
            :WaitForChild("_Index")
            :WaitForChild("sleitnick_net@0.2.0")
            :WaitForChild("net")
            :WaitForChild("RF/SellAllItems")
            :InvokeServer()
    end
})
--// Hack Tab
local TabHack = Window:Tab({
    Title = "Hack",
    Icon = "zap"
})

local FlyConnection
local ReframeThread

TabHack:Toggle({
    Title = "Fly Bypass",
    Desc = "Anti-Ban Fly",
    Default = false,
    Callback = function(state)
        if state then
            local Players = game:GetService("Players")
            local RunService = game:GetService("RunService")
            local UIS = game:GetService("UserInputService")

            local plr = Players.LocalPlayer
            local char = plr.Character or plr.CharacterAdded:Wait()
            local hum = char:WaitForChild("Humanoid")
            local hrp = char:WaitForChild("HumanoidRootPart")
            local cam = workspace.CurrentCamera

            getgenv().Fly = true
            local MOVE_SPEED = 40
            local Y_POWER = 0.8
            local DEADZONE = 0.25
            local MAX_Y_STEP = 1
            local SMOOTH = 0.1

            local gameSettings = UserSettings():GetService("UserGameSettings")
            local oldControl = gameSettings.ControlMode
            local oldMouse = UIS.MouseBehavior

            local bp, bv, bg
            local hoverY = hrp.Position.Y
            local smoothY = hoverY

            local highlight = Instance.new("Highlight")
            highlight.Adornee = char
            highlight.FillTransparency = 1
            highlight.OutlineTransparency = 0.2
            highlight.OutlineColor = Color3.fromRGB(120,200,255)
            highlight.Parent = char

            local function startFly()
                if bp then bp:Destroy() end
                if bv then bv:Destroy() end
                if bg then bg:Destroy() end

                hum.PlatformStand = true

                bp = Instance.new("BodyPosition", hrp)
                bp.MaxForce = Vector3.new(0,1e9,0)
                bp.P = 80000
                bp.D = 3000
                bp.Position = hrp.Position

                bv = Instance.new("BodyVelocity", hrp)
                bv.MaxForce = Vector3.new(1e9,0,1e9)

                bg = Instance.new("BodyGyro", hrp)
                bg.MaxTorque = Vector3.new(1e9,1e9,1e9)
                bg.P = 40000
                bg.D = 1200
                bg.CFrame = cam.CFrame
            end

            startFly()

            ReframeThread = task.spawn(function()
                while getgenv().Fly do
                    if not (hrp:FindFirstChild("BodyPosition") and hrp:FindFirstChild("BodyVelocity") and hrp:FindFirstChild("BodyGyro")) then
                        startFly()
                    end
                    task.wait(0.5)
                end
            end)

            FlyConnection = RunService.RenderStepped:Connect(function()
                if not getgenv().Fly then return end

                gameSettings.ControlMode = Enum.ControlMode.MouseLockSwitch
                UIS.MouseBehavior = Enum.MouseBehavior.LockCenter

                for _,v in ipairs(char:GetDescendants()) do
                    if v:IsA("BasePart") then
                        v.CanCollide = false
                    end
                end

                local dir = hum.MoveDirection
                bv.Velocity = Vector3.new(dir.X * MOVE_SPEED, 0, dir.Z * MOVE_SPEED)

                if dir.Magnitude > 0.01 then
                    local lookY = cam.CFrame.LookVector.Y
                    if math.abs(lookY) > DEADZONE then
                        hoverY += math.clamp(lookY * Y_POWER, -MAX_Y_STEP, MAX_Y_STEP)
                    end
                end

                smoothY += (hoverY - smoothY) * SMOOTH
                bp.Position = Vector3.new(hrp.Position.X, smoothY, hrp.Position.Z)
                bg.CFrame = cam.CFrame
            end)
else
    getgenv().Fly = false

    if FlyConnection then
        FlyConnection:Disconnect()
        FlyConnection = nil
    end

    if ReframeThread then
        task.cancel(ReframeThread)
        ReframeThread = nil
    end

    local plr = game.Players.LocalPlayer
    local char = plr.Character
    if not char then return end

    local hum = char:FindFirstChildOfClass("Humanoid")
    local hrp = char:FindFirstChild("HumanoidRootPart")

    if hrp then
        for _,v in ipairs(hrp:GetChildren()) do
            if v:IsA("BodyPosition")
            or v:IsA("BodyVelocity")
            or v:IsA("BodyGyro") then
                v:Destroy()
            end
        end

        -- บังคับให้ตก
        hrp.AssemblyLinearVelocity = Vector3.new(0, -50, 0)
    end

    if hum then
        hum.PlatformStand = false
        hum:ChangeState(Enum.HumanoidStateType.Freefall)
    end

    for _,v in ipairs(char:GetDescendants()) do
        if v:IsA("BasePart") then
            v.CanCollide = true
        elseif v:IsA("Highlight") then
            v:Destroy()
        end
    end
end